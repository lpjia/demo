# 位运算

将一个整数的二进制格式进行运算

js中, 如果对一个数据进行位运算, 它首先会将其转换为一个整数, 并且按照32位的整数二进制排列

有小数的, 直接扔掉, 非四舍五入

负数的话, 二进制第一位是1, 第一位是符号位

举例

    2.8 -> 2 -> 0000 0000 0000 0000 0000 0000 0000 0010

    NaN -> 0

    Infinity -> 0

    -Infinity -> 0

## 与运算 按位与运算

符号: &

写法: 整数1 & 整数2

将两个整数每一位进行比较, 如果都为1, 结果为1, 否则结果为0

## 或运算 按位或运算

符号: |

写法: 整数1 | 整数2

将两个整数每一位进行比较, 如果都为0, 结果为0, 否则结果为1

## 非运算 按位非运算

符号: ~

写法: ~整数

将整数按位取反

#### 负数的存储方式

-1

真码: 1000 0000 0000 0000 0000 0000 0000 0001
反码: 1111 1111 1111 1111 1111 1111 1111 1110 真码取反 符号位不变
补码: 1111 1111 1111 1111 1111 1111 1111 1111 反码加1

人阅读方便真码, 但是计算机不会这样存储, 补码才是负数的存储方案

所以, 负数二进制减1, 将0看作1, 1看作0

举例

```
~1 // 1取反 按位取反(包括符号位)

1  -> 0000 0000 0000 0000 0000 0000 0000 0001
~1 -> 1111 1111 1111 1111 1111 1111 1111 1110 // 看起来像是负数的补码, 符号位是1, 当作补码。

// 补码转成反码, 减1

反码  1111 1111 1111 1111 1111 1111 1111 1101

// 反码转成真码, 符号位不变, 按位取反 // 将0看作1, 1看作0

真码  1000 0000 0000 0000 0000 0000 0000 0010 // 得出-2

```

#### 取反的快速运算: -取反的数字-1

1 取反 -(1)-1得出-2
-10 取反 -(-10)-1得出9

#### js中最快速的取整方式: `~~数字`

## 异或运算 按位异或运算

符号: ^

写法: 整数1 ^ 整数2

将整数1和整数2按位比较, 不同取1, 相同取0

## 应用

位的叠加(开关), 也就是用位运算实现权限组合, 效率很高

## 位移运算

#### 左位移: <<

写法: 整数1 << 整数2

结果: 整数1 * 2 ** 整数2

将整数1的二进制(除符号位之外)左移动整数2的次数, **是幂, 也就是次方

#### 右位移: >>

写法: 整数1 >> 整数2

结果: 整数1 / 2 ** 整数2, 再取整数部分

将整数1的二进制(除符号位之外)右移动整数2的次数, **是幂, 也就是次方

右位移可能会丢失数据

#### 全右位移: >>>

写法: 整数1 >>> 整数2

与右位移的区别, 在于全右位移会导致符号位跟着位移